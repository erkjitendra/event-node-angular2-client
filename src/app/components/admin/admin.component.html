 <nav class="navbar navbar-inverse navbar-fixed-top" >
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">EvEnT BlenD (<small>Admin panal</small>)</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <form class="navbar-form navbar-right">
            <div class="form-group">
              <input type="button"  class="btn btn-default upperCase" value="New-Admin" (click)="stateChange('createNewAdmin')">
            </div>
            <div class="form-group">
                <label></label>
              <input type="submit"  class="btn btn-danger upperCase"  style="text-transform:uppercase" value="{{loggedUser}}" (click)="signout(id)">
            </div>
            </form>
        </div><!--/.navbar-collapse -->
      </div>
</nav>



<!--Add new admin panal -->
<br /><br /><br />
<div class="container" *ngIf="state == 'createNewAdmin'">
    <div class="col-md-12">
        <div class="col-md-2">
              <button class="btn btn-block btn-danger" (click)="stateChange('Admin')">Back</button>
        </div>
    </div>
    <div class="row">
        <h3 class="col-sm-offset-3 col-sm-6">Create New Admin</h3>
    </div>
    <div class="row">
        <div class="col-sm-offset-1 col-sm-2">
        </div>
        <div class="col-md-6">
            <form (submit)="createNewAdmin(fname,lname,email,F,M,pass,repass,phone)" class="form" >
                <div class="row">
                    <div class="col-md-6">
                        <input type="text" name="firstname" on-focusout="checkError('fname',fname)" on-focus="removeCheck('fname')" value="" class="form-control loginForm" placeholder="First Name" #fname />                       
                         <div class="alert alert-warning loginForm" *ngIf="errState == 'fname'">First Name cant be Empty</div>
                         </div>
                        
                    <div class="col-md-6">
                        <input type="text" name="lastname" on-focusout="checkError('lname',lname)" on-focus="removeCheck('lname')" value="" class="form-control loginForm " placeholder="Last Name" #lname  />                       
                        <div class="alert alert-warning loginForm" *ngIf="errState == 'lname'">Last Name cant be Empty</div>
                         </div>
                        
                </div>
                <input type="email" name="email" on-focusout="checkError('email',email)" on-focus="removeCheck('email')" value="" class="form-control  loginForm" placeholder="Your Email" #email />
                <div class="alert alert-warning loginForm" *ngIf="errState == 'email'">Email address is in valid....</div>
                <input type="password" name="password" value="" on-focusout="checkError('pass',pass)" on-focus="removeCheck('pass')" class="form-control loginForm " placeholder="Password must be be 8 char " #pass  />
                <div class="alert alert-warning loginForm" *ngIf="errState == 'pass'">password length must be 8</div>
                <input type="password" name="confirm_password" on-focusout="checkError('repass',repass)" on-focus="removeCheck('repass')" value="" class="form-control loginForm " placeholder="Confirm Password" #repass />
                <div class="alert alert-warning loginForm" *ngIf="errState == 'repass'">password did not match</div>
                <div class="alert alert-warning loginForm" *ngIf="state == 'passerr'">plz enter correct password</div>
                <input type="number" name="phone" on-focusout="checkError('phone',phone)" on-focus="removeCheck('phone')" value="" class="form-control loginForm " placeholder="Enter your mobile number" #phone />
                <div class="alert alert-warning loginForm" *ngIf="errState == 'phone'">Phone number is not valid....</div>
                
                    <label>Birth Date</label>
                    <div class="row">
                        <div class="col-xs-4 col-md-4">
                            <select class = "form-control" onmousedown="this.size=10;"  onchange='this.size=0;' onblur="this.size=0;" [(ngModel)]='rmonth' name='rmonth'>
                                <option value="1">Jan</option><option value="2">Feb</option><option value="3">Mar</option>
                                <option value="4">Apr</option><option value="5">May</option><option value="6">Jun</option>
                                <option value="7">Jul</option><option value="8">Aug</option><option value="9">Sep</option>
                                <option value="10">Oct</option><option value="11">Nov</option><option value="12">Dec</option>
                            </select>
                        </div>
                        <div class="col-xs-4 col-md-4">
                            <select class = "form-control" onmousedown="this.size=10;"  onchange='this.size=0;' onblur="this.size=0;" [(ngModel)]='rday' name='rday'>
                                <option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option>
                                <option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option>
                                <option value="09">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option>
                                <option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option>
                                <option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="21">21</option>
                                <option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option>
                                <option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option>
                                <option value="30">30</option><option value="31">31</option>
                            </select>                        
                        </div>
                        <div class="col-xs-4 col-md-4"  *ngIf="years">
                            <select class = "form-control " onmousedown="this.size=10;"  onchange='this.size=0;' onblur="this.size=0;" [(ngModel)]='ryear' name='ryear'>
                                <option *ngFor="let year of years" value="{{year}}">{{year}}</option>
                            </select>
                        </div>
                    </div><br />
                    <label>Gender : </label>
                    <label class="radio-inline">
                        <input type="radio" name="gender" value="M" id=male #F />Male
                    </label>
                    <label class="radio-inline">
                        <input type="radio" name="gender" value="F" id=female #M />Female
                    </label>
                    <div class="alert alert-warning loginForm" *ngIf="errState == 'fillAllAdminDetails'">Fill all Information correctly</div>
                    <br />
                <span class="help-block">By clicking Create my account, you agree to our Terms and that you have read our Data Use Policy, including our Cookie Use.</span>
                <button class="btn btn-lg btn-primary btn-block signup-btn" type="submit">Create my account</button>
            </form>                  
        </div>
      </div>
    </div>
<!--- ///// -->


<div class="main" *ngIf="state == 'Admin'">
    <div class="row">
        <div class="col-md-12">
            <div class="col-md-6">
                <div class="col-md-4">
                    <p-calendar [(ngModel)]="value" (onSelect)="showdate(this.value)" [inline]="true"></p-calendar>
                    
                </div>
                <span class="pull-right">
                <div class="col-md-3">
                    <button class="btn btn-admin  btn-default" (click)="stateChange('addNewEvent')">Add New Event</button>
                </div>
                </span>
            </div>
            <div class="col-md-6">
                <div class="col-md-3">
                    <button class="btn btn-admin  btn-default" (click)="historyOfBooking()">History</button>
                </div>
                <div class="col-md-3">
                    <button class="btn btn-admin  btn-default" (click)="stateChange('Category')">Category</button>
                </div>
                <div class="col-md-3 pull-right">
                    <span >
                            <select class="form-control" #catFilter (change)="filterByCategory(catFilter.value)" >
                                <option class="form-control" value="0">Category</option>
                                <option class="form-control" *ngFor="let cat of categoryList">{{cat.categoryname}}</option>
                            </select>
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>

<!--Category add  -->
<br /><br />
<form class="form" *ngIf="state == 'Category'">
<div class="row">
<div class="col-md-12">
    <fieldset>
        <legend>
            <button class="btn btn-success" (click)="stateChange('addCategory')">Add New Category</button>
            <span class="pull-right"><button class="btn btn-warning" (click)="stateChange('Admin')">Back</button></span>
        </legend>
        <table class="table">
        <thead>
            <tr>
                <th><label>S No.</label></th>
                <th><label>Category Name:</label></th>
                <th></th>
            </tr>
        </thead>
        <tbody *ngFor="let cat of categoryList; let i = index">
            <tr>
                <td>{{i}}</td>
                <td>{{cat.categoryname}}</td>
                <td><button class="btn btn-danger" (click)="deleteCategory(cat._id)">Delete</button></td>
            </tr>
        </tbody>
        </table>
    </fieldset>
</div>
</div>
</form>

<!--Add new Category panal -->
<div class="container" *ngIf="state == 'addCategory'">
    <div class="row">
        <div class="col-md-12">
            <form class="form">
                <fieldset>
                    <legend>Add New Category Name
                        <span class="pull-right"><button class="btn btn-warning" (click)="stateChange('Category')">Back</button></span>
                    </legend>
                </fieldset>
                <label>Category Name:</label>
                <input type="text" on-focusout="checkError('category',newCatName)" on-focus="removeCheck('category')" class="form-control" #newCatName>
                <div class="warning" *ngIf ="errState == 'category'">Enter Category Name please! </div>
                <br />
                <button class="btn btn-lg btn-success" (click)="addNewCategory(newCatName)">Add Category!</button>
            </form>
        </div>
    </div>
</div>

<!--Add new event -->
<div class="container" *ngIf="state == 'addNewEvent'">
    <form>
        <fieldset>
            <legend>Fill all Information regarding new Admin
                 <span class="pull-right" >
                        <select class="form-control" #catName>
                            <option value="0">Category</option>
                            <option *ngFor="let cat of categoryList" value="{{cat.categoryname}}">{{cat.categoryname}}</option>
                        </select>
                    </span>
            </legend>
            <div class="form"> 
            <div class="form-group">
            <label for="event name">Event name:</label>
            <input type="text" class="form-control" #eventNm>
            </div>

            <div class="form-group">
            <label for="pwd">Location:</label>
            <input type="text" class="form-control" #loc>
            </div>
            
            <div class="form-group">
            <label for="by">By:</label>
            <input type="text" class="form-control" #by >
            </div>


            <div class="form-group">
            <label for="event name">Date:</label>
            <input type="text" on-focusout="checkError('date',date.value)" on-focus="removeCheck('date')" class="form-control" placeholder="Date Format : MM/DD/YYYY" #date >
            <label class="warning" *ngIf="errState =='date'">Enter date in correct format & fesable date</label>
            </div>

            <div class="form-group">
            <label for="event name">Ticket Price:</label>
            <input type="number" on-focusout="checkError('ticket',ticket.value)" on-focus="removeCheck('ticket')" class="form-control" #ticket>
            <label class="warning" *ngIf="errState =='ticket'">Enter price of ticket grater than 0 and valid Number value</label>
            </div>

            <div class="form-group">
            <label for="event name">Number of Seats:</label>
            <input type="number" on-focusout="checkError('seat',seats)" on-focus="removeCheck('seat')" class="form-control" #seats>
            <label class="warning" *ngIf="errState =='seat'">Enter Seats number grater than 0 and valid Number value</label>
            </div>

            <div class="form-group">
            <label for="comment">About:</label>
            <textarea class="form-control" rows="5" #info></textarea>
            </div>
                <div class="warning" *ngIf = "errState == 'fillAllData'">please fill all data correctly</div>
            </div>
        <div class="row">
            <div class="col-md-12">
                <div class="col-md-3">
                    <span class="pull-right"><button type="button" class="btn  btn-lg signup-btn  btn-primary btn-block " (click)="addNewEvent(eventNm,loc,by,date,ticket,seats,info,catName)">Save</button></span>
                </div>
                <div class="col-md-3">
                    <span class="pull-right"><button type="button" class="btn  btn-lg signup-btn  btn-warning btn-block " (click)="stateChange('Admin')">Back</button></span>
                </div>
            </div>
        </div>
        </fieldset>
    </form>
</div>



<!-- end -->

<!--View Details of event -->
<div class="container" *ngIf="state == 'eventDetails'">
    <div class="row">
        <div class="col-md-12">
                <fieldset>
                    <legend>Complete Details of Event: <span class="pull-right"><button class="btn btn-danger" (click)="stateChange('Admin')">Back</button></span></legend>
                    <div class="col-md-6">
                    <label>Name:</label> <p class="form-control">{{Event}}</p> 
                    </div>
                    <div class="col-md-6">
                    <label>Sponsor:</label> <p class="form-control">{{by}}</p> 
                    </div>
                    <div class="col-md-6">
                    <label>Category:</label> <p class="form-control">{{Category}}</p> 
                    </div>
                    <div class="col-md-6">
                    <label>Location:</label> <p class="form-control">{{Location}}</p> 
                    </div>
                    <div class="col-md-6">
                    <label>Ticket Rate:</label> <p class="form-control">{{Ticket}}</p> 
                    </div>
                    <div class="col-md-6">
                    <label>Total Seats:</label> <p class="form-control">{{T_seats}}</p> 
                    </div>
                    <div class="col-md-6">
                    <label>Booked Seats:</label> <p class="form-control">{{B_seats}}</p> 
                    </div>
                    <div class="col-md-6">
                    <label>Avalible Seats:</label> <p class="form-control">{{F_seats}}</p> 
                    </div>
                    <div class="col-md-6">
                    <label>Date:</label> <p class="form-control">{{Date}}</p> 
                    </div>
                    <div class="col-md-12">
                    <label>Info About Event:</label> <textarea class="form-control" disabled="true" rows="5">{{info}}</textarea> 
                    </div>
                </fieldset>
        </div>
    </div>
</div>
<!-- -->

<!--Edit event -->
<br /><br />
<div class="container" *ngIf="state == 'editEvent'">
    <fieldset>
        <legend>
            Update Event Details
            <span class="pull-right"><button class="btn btn-default btn-danger" (click)="stateChange('Admin')">Back</button></span>
        </legend>

        <div class="row" class="form">
            <div class="col-md-12">
                <div class="col-md-6">
                    <label>Event:</label>
                    <input type="text" class="form-control" [(ngModel)]="Event" name="Event">
                </div>
                <div class="col-md-6">
                    <label>Category:</label>
                    <input type="text" class="form-control" [(ngModel)]="Category" name="Category">
                </div>
            </div>
            <div class="col-md-12">
                <div class="col-md-6">
                    <label>Location:</label>
                    <input type="text" class="form-control" [(ngModel)]="Location" name="Location">
                </div>
                <div class="col-md-6">
                    <label>Sponsor:</label>
                    <input type="text" class="form-control" [(ngModel)]="by" name="by">
                </div>
            </div>
            <div class="col-md-12">
                <div class="col-md-6">
                    <label>Date:</label>
                    <input type="text" class="form-control" on-focusout="checkError('date',Date)" on-focus="removeCheck('date')" placeholder="MM/DD/YYYY" [(ngModel)]="Date" name="Date">
                    <label class="warning" *ngIf="errState =='date'">Enter date in correct format & fesable date</label>
                </div>
                <div class="col-md-6">
                    <label>Ticket Price:</label>
                    <input type="text" class="form-control" on-focusout="checkError('ticket',Ticket)" on-focus="removeCheck('ticket')" [(ngModel)]="Ticket" name="Ticket">
                    <label class="warning" *ngIf="errState =='ticket'">Enter price of ticket grater than 0 and valid Number value</label>
                </div>
            </div>
            <div class="col-md-12">
                <div class="col-md-6">
                    <label>Total Seats:</label>
                    <input type="text" class="form-control" on-focusout="checkError('T_seats',T_seats)" on-focus="removeCheck('T_seats')" [(ngModel)]="T_seats" name="T_seats">
                    <label class="warning" *ngIf="errState =='T_seats'">Number of Total seats grater than booked seats</label>
                </div>
                <div class="col-md-6">
                    <label>Booked Seats:</label>
                    <input type="text" class="form-control" disabled="true" [(ngModel)]="B_seats" name="B_seats">
                </div>
            </div>
            <div class="col-md-12">
                <div class="col-md-6">
                <div class="form-group">
                    <label>Information:</label>
                    <textarea class="form-control custom-control" rows="7" style="resize:none" [(ngModel)]="info" name="info" ></textarea>
                </div>
                </div>
            </div>
            <div class="col-md-12">
                <div class="warning" *ngIf = "errState == 'editAllData'">please fill all data correctly</div>
                <div class="warning" *ngIf = "errState == 'editAllDataSeatError'">Total Seats must be equal or grater than booked seats</div>
                <div class="col-md-1">
                <button class="btn btn-success" (click)="updateEvent()">Update</button>
                </div>
            </div>
        </div>
    </fieldset>
</div>
<!-- -->

<div class="panel panel-info main" *ngIf="AdminEventList && state == 'Admin'">
    <div class="panel-heading"><b>All Events </b><span class="pull-right"><button class="" (click)="getEvents()">Show All</button></span></div>
        <div class="panel-body">
           <div class="row">
               <div class="col-md-12">
                    <table class="table">
                        <thead>
                            <tr>
                                <th><span>Event</span></th>
                                <th><span>Category</span></th>
                                <th><span>Location</span></th>
                                <th><span>Sponsor</span></th>
                                <th><span>Date</span></th>
                                <th><span>Ticket price</span></th>

                            </tr>
                        </thead>
                        <tbody *ngFor="let AdminEventList of AdminEventList">
                            <tr>
                                <td>{{AdminEventList.Event}}</td>
                                <td>{{AdminEventList.Category}}</td>
                                <td>{{AdminEventList.Location}}</td>
                                <td>{{AdminEventList.Sponsor}}</td>
                                <td>{{AdminEventList.Date}}</td>
                                <td>{{AdminEventList.Ticket}}</td>
                                <td><span class="pull-right">
                                    <button class="btn  btn-primary" (click)="editiEvent(AdminEventList)">Edit</button>
                                    <button class="btn  btn-danger" (click)="deleteEvent(AdminEventList._id)">Delete</button>
                                    <button class="btn  btn-info" (click)="showDetailsEvent(AdminEventList)">Details</button>
                                </span></td>
                            </tr>
                        </tbody>
                    </table>
               </div>
           </div>
        </div>
</div>
 
<!--calender and botton history panel panel-->
<div class="main" *ngIf=" state == 'history'">
    <div class="row">
        <div class="col-md-12">
            <div class="col-md-6">
                <div class="col-md-4">
                    <p-calendar [(ngModel)]="value" (onSelect)="historyOfBookingbydate(this.value)" [inline]="true"></p-calendar>
                    <button class="btn  btn-block" style="width: 235px"  (click)="historyOfBooking()">Show All</button>
                </div>
               
            </div>
            <div class="col-md-6">
                
                <div class="col-md-3 pull-right">
                    <span >
                            <select class="form-control" [(ngModel)]="catFilter" name="catFilter" (change)="filterByCategoryUser('history')" >
                                <option class="form-control" value="0">Category</option>
                                <option class="form-control" *ngFor="let cat of categoryList">{{cat.categoryname}}</option>
                            </select>
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>

<!--History of all booking by user-->
<br /><br />
<div class="panel panel-info main" *ngIf="history && state == 'history'">
    <div class="panel-heading"><b>All Events </b><span class="pull-right"><button class="" (click)="stateChange('Admin')">back</button></span></div>
        <div class="panel-body">
           <div class="row">
               <div class="col-md-12">
                    <table class="table">
                        <thead>
                            <tr>
                                <th><span>Event</span></th>
                                <th><span>Category</span></th>
                                <th><span>Location</span></th>
                                <th><span>Sponsor</span></th>
                                <th><span>Date</span></th>
                                <th><span>Ticket price</span></th>

                            </tr>
                        </thead>
                        <tbody *ngFor="let history of history">
                            <tr>
                                <td>{{history.Event}}</td>
                                <td>{{history.Category}}</td>
                                <td>{{history.Location}}</td>
                                <td>{{history.Sponsor}}</td>
                                <td>{{history.Date}}</td>
                                <td>{{history.Ticket}}</td>
                                <td><span class="pull-right">
                                    <button class="btn  btn-info" (click)="showcompleteDetailsAdmin(history._id,history.User_id)">Details</button>
                                </span></td>
                            </tr>
                        </tbody>
                    </table>
               </div>
           </div>
        </div>
</div>

<!--View Details of history single Details -->
<div class="container" *ngIf="state == 'singleHistory'">
    <div class="row">
        <div class="col-md-12">
                <fieldset>
                    <legend>Complete Details of Event Booked By User: <span class="pull-right"><button class="btn btn-danger" (click)="stateChange('Admin')">Back</button></span></legend>
                    <div class="col-md-6">
                    <label>Name:</label> <p>{{singleHistoryDetails.Event}}</p> 
                    </div>
                    <div class="col-md-6">
                    <label>Sponsor:</label> <p>{{singleHistoryDetails.Sponsor}}</p> 
                    </div>
                    <div class="col-md-6">
                    <label>Category:</label> <p>{{singleHistoryDetails.Category}}</p> 
                    </div>
                    <div class="col-md-6">
                    <label>Location:</label> <p>{{singleHistoryDetails.Location}}</p> 
                    </div>
                    <div class="col-md-6">
                    <label>Ticket Rate:</label> <p>{{singleHistoryDetails.Ticket}}</p> 
                    </div>
                    <div class="col-md-6">
                    <label>Booked Seats:</label> <p>{{singleHistoryDetails.B_seats}}</p> 
                    </div>
                    <div class="col-md-6">
                    <label>Date:</label> <p>{{singleHistoryDetails.Date}}</p> 
                    </div>
                    <div class="col-md-6">
                    <label>Booked By:</label> <p>{{singleUserDetails.fname}} {{singleUserDetails.lname}}</p> 
                    </div>
                    <div class="col-md-6">
                    <label>User Email:</label> <p>{{singleUserDetails.email}}</p> 
                    </div>
                     <div class="col-md-6" *ngIf="singleHistoryDetails.Active == true">
                    <label>Status of Booking:</label> <p>Booked</p> 
                    </div>
                    <div class="col-md-6" *ngIf="singleHistoryDetails.Active == false">
                    <label>Status of Booking:</label> <p>Booking Canceled</p> 
                    </div>
                    <div class="col-md-12">
                    <label>Info About Event:</label> <p>{{singleHistoryDetails.info}}</p> 
                    </div>
                </fieldset>
        </div>
    </div>
</div>
<!-- -->
     
          
    

  
    
 